{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js!/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suhang/Template/tradingview/demo2/src/components/bank/bank.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/bank/bank.vue","mtime":1597047833496},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js","mtime":1598844172845},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js","mtime":1598844194174}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGdldEJhbmsgZnJvbSAnLi9iYW5rJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJiYW5rIiwKICBwcm9wczogewogICAgLy8gbGFibGXmloflrZcKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICAvLyDmj5DnpLrmloflrZcKICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGNhcmROdW1iZXI6ICIiLAogICAgICBiYW5rTmFtZTogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WkseWOu+eEpueCueivt+axggogICAgYmx1cnM6IGZ1bmN0aW9uIGJsdXJzKCkgewogICAgICB2YXIgdm0gPSB0aGlzOyAvL+ajgOa1iyDpk7booYzljaHlj7fmmK/lkKblrZjlnKgKCiAgICAgIHZhciBodHRwID0gImh0dHBzOi8vY2NkY2FwaS5hbGlwYXkuY29tL3ZhbGlkYXRlQW5kQ2FjaGVDYXJkSW5mby5qc29uP19pbnB1dF9jaGFyc2V0PXV0Zi04JmNhcmRCaW5DaGVjaz10cnVlIjsKICAgICAgYXhpb3MuZ2V0KGh0dHAsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNhcmRObzogdm0uY2FyZE51bWJlcgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudmFsaWRhdGVkKSB7CiAgICAgICAgICAgIHZtLnNob3cgPSB0cnVlOwogICAgICAgICAgICB2bS5iYW5rTmFtZSA9IHZtLmdldEJhbmsocmVzcG9uc2UuZGF0YS5iYW5rKTsKICAgICAgICAgICAgdm0uJGVtaXQoImNhbGxiYWNrIiwgewogICAgICAgICAgICAgIGNhcmROdW1iZXI6IHZtLmNhcmROdW1iZXIsCiAgICAgICAgICAgICAgYmFua05hbWU6IHZtLmJhbmtOYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0uc2hvdyA9IGZhbHNlOwogICAgICAgICAgICB2bS4kbm90aWZ5KHsKICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn6ZO26KGM5Y2h5Y+36L6T5YWl5LiN5ZCI5rOVJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdm0uY2FyZE51bWJlciA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bS4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfllYrlgbbvvIHmlq3nvZHkuoYuLi4nCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7Ly8gYWx3YXlzIGV4ZWN1dGVkCiAgICAgIH0pOwogICAgfSwKICAgIC8v6K6h566XIOacgOe7iOaQnOe0oueahOmTtuihjOWQjeWtlwogICAgZ2V0QmFuazogZnVuY3Rpb24gZ2V0QmFuayhzdHIpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIG5hbWUgPSAiIjsKICAgICAgdm0ubGlzdC5tYXAoZnVuY3Rpb24gKGN1cnJlbnRWYWx1ZSwgaW5kZXgsIGFycikgewogICAgICAgIGlmIChjdXJyZW50VmFsdWUudmFsdWUgPT0gc3RyKSB7CiAgICAgICAgICBuYW1lID0gY3VycmVudFZhbHVlLnRleHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHZtID0gdGhpczsKICAgIHZtLmxpc3QgPSBnZXRCYW5rLmdldEJhbmsoKTsKICB9LAogIGNvbXB1dGVkOiB7fQp9Ow=="},{"version":3,"sources":["bank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,OAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAFA;AAMA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAPA,GAFA;AAcA,EAAA,IAdA,kBAcA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,KAFA,mBAEA;AACA,UAAA,EAAA,GAAA,IAAA,CADA,CAEA;;AACA,UAAA,IAAA,GAAA,iGAAA;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,IAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,MAAA,EAAA,EAAA,CAAA;AADA;AADA,OAAA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,CAAA,SAAA,EAAA;AACA,YAAA,EAAA,CAAA,IAAA,GAAA,IAAA;AACA,YAAA,EAAA,CAAA,QAAA,GAAA,EAAA,CAAA,OAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,YAAA,EAAA,CAAA,KAAA,CAAA,UAAA,EAAA;AACA,cAAA,UAAA,EAAA,EAAA,CAAA,UADA;AAEA,cAAA,QAAA,EAAA,EAAA,CAAA;AAFA,aAAA;AAIA,WAPA,MAOA;AACA,YAAA,EAAA,CAAA,IAAA,GAAA,KAAA;AACA,YAAA,EAAA,CAAA,OAAA,CAAA;AAAA,cAAA,IAAA,EAAA,QAAA;AAAA,cAAA,OAAA,EAAA;AAAA,aAAA;AACA,YAAA,EAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,SAbA,MAaA;AACA,UAAA,EAAA,CAAA,OAAA,CAAA;AAAA,YAAA,IAAA,EAAA,QAAA;AAAA,YAAA,OAAA,EAAA;AAAA,WAAA;AACA;AACA,OAtBA,EAuBA,KAvBA,CAuBA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAzBA,EA0BA,IA1BA,CA0BA,YAAA,CACA;AACA,OA5BA;AA6BA,KAnCA;AAoCA;AACA,IAAA,OArCA,mBAqCA,GArCA,EAqCA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,IAAA,GAAA,EAAA;AACA,MAAA,EAAA,CAAA,IAAA,CAAA,GAAA,CAAA,UAAA,YAAA,EAAA,KAAA,EAAA,GAAA,EAAA;AACA,YAAA,YAAA,CAAA,KAAA,IAAA,GAAA,EAAA;AACA,UAAA,IAAA,GAAA,YAAA,CAAA,IAAA;AACA;AACA,OAJA;AAKA,aAAA,IAAA;AACA;AA9CA,GAtBA;AAsEA,EAAA,OAtEA,qBAsEA;AACA,QAAA,EAAA,GAAA,IAAA;AACA,IAAA,EAAA,CAAA,IAAA,GAAA,OAAA,CAAA,OAAA,EAAA;AACA,GAzEA;AA0EA,EAAA,QAAA,EAAA;AA1EA,CAAA","sourcesContent":["<template>\n  <div class=\"vue-bank\">\n       <label>\n            <span>{{title}}</span>\n            <input type=\"tel\"\n            v-model.trim=\"cardNumber\"\n            @blur=\"blurs\"\n            :placeholder=\"placeholder\"\n            autocomplete=\"off\"\n            />\n        </label>\n        <label v-if=\"show\">\n            <span>所属银行</span>\n            <input type=\"text\"\n            v-model.trim=\"bankName\"\n            readonly  \n            unselectable=\"on\"\n            autocomplete=\"off\"\n            />\n        </label>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport getBank from './bank';\nexport default {\n  name: \"bank\",\n  props: {\n    // lable文字\n    title: {\n      type: String,\n      default: \"\"\n    },\n    // 提示文字\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n        list:[],\n        show:false,\n        cardNumber:\"\",\n        bankName:\"\"\n    };\n  },\n  methods: {\n      //失去焦点请求\n      blurs(){\n          const vm = this;\n          //检测 银行卡号是否存在\n          const http = \"https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?_input_charset=utf-8&cardBinCheck=true\";\n          axios.get(http, {\n            params: {\n              cardNo: vm.cardNumber\n            }\n          })\n          .then(function (response) {\n            if(response.status == 200){\n                if(response.data.validated) {\n                  vm.show = true;\n                  vm.bankName = vm.getBank(response.data.bank);\n                  vm.$emit(\"callback\", {\n                    cardNumber:vm.cardNumber,\n                    bankName:vm.bankName\n                  });\n                }else {\n                  vm.show = false;\n                  vm.$notify({ type: 'danger', message: '银行卡号输入不合法' });\n                  vm.cardNumber=\"\";\n                }\n            }else {\n              vm.$notify({ type: 'danger', message: '啊偶！断网了...' });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          })\n          .then(function () {\n            // always executed\n          });\n      },\n      //计算 最终搜索的银行名字\n      getBank(str){\n        const vm = this;\n        let name = \"\";\n        vm.list.map(function(currentValue,index,arr){\n          if(currentValue.value == str){\n            name = currentValue.text;\n          }\n        })\n        return name\n      }\n  },\n  mounted() {\n    const vm = this;\n    vm.list = getBank.getBank();\n  },\n  computed:{\n    \n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n    .vue-bank {\n        label {\n            height: 90px;\n            display: flex;\n            align-items: center;\n            border-bottom: 1px solid #eee;\n            span {\n                font-size: 30px;\n                color: #333;\n                width: 150px;\n            }\n            input {\n                height: 100%;\n                width: calc(100% - 150px);\n                border:0;\n                background-color: transparent;\n            }\n        }\n    }\n</style>"],"sourceRoot":"src/components/bank"}]}