{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js!/Users/suhang/Template/tradingview/demo2/src/components/sUpload/cropperView.js","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/sUpload/cropperView.js","mtime":1596975269332},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js","mtime":1598844172845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDlsIbmnKzlnLDlm77niYfovazljJbkuLpCYXNlNjTvvIzlkKbliJl2dWUtY3JvcHBlcue7hOS7tuaYvuekuuS4jeWHuuimgeacrOWcsOmcgOimgeWJquijgeeahOWbvueJhwogICAgICogQHBhcmFtIHsqfSBmaWxlICDkuozov5vliLbmlofku7YKICAgICAqLwogICAgaW1hZ2VUb0Jhc2U2NDogZnVuY3Rpb24gaW1hZ2VUb0Jhc2U2NChmaWxlKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5oiq5Zu+5qGG5Lit55qE5Zu+54mHCiAgICAgICAgdm0uJHNldCh2bS5vcHRpb24sICJpbWciLCByZWFkZXIucmVzdWx0KTsKICAgICAgICB2bS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgdm0ubW9kZWxTaG93ID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLCBlcnJvcik7CiAgICAgIH07CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgLy/oo4HliaoKICAgIGdldENyb3BGaWxlOiBmdW5jdGlvbiBnZXRDcm9wRmlsZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIOiOt+WPluaIquWbvueahGJsb2LmlbDmja4KICAgICAgaWYgKHRoaXMuZmlsZVR5cGUgPT0gJ0Jsb2InKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLmdldENyb3BCbG9iKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2F2YXRhcicsIGRhdGEsIF90aGlzLmltYWdlRmlsZU5hbWUpOyAvLyBmb3JtRGF0Yeengeacieexu+Wvueixoe+8jOiuv+mXruS4jeWIsO+8jOWPr+S7pemAmui/h2dldOWIpOaWreWAvOaYr+WQpuS8oOi/m+WOuwogICAgICAgICAgLy8gY29uc29sZS5sb2coZm9ybURhdGEuZ2V0KCdhdmF0YXInKSk7CgogICAgICAgICAgX3RoaXMuJGVtaXQoJ2dldEZpbGUnLCBmb3JtRGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8g6I635Y+W5oiq5Zu+55qEYmFzZTY0IOaVsOaNrgoKCiAgICAgIGlmICh0aGlzLmZpbGVUeXBlID09ICdCYXNlNjQnKSB7CiAgICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLmdldENyb3BEYXRhKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBfdGhpcy4kZW1pdCgnZ2V0RmlsZScsIGRhdGEpOwogICAgICAgIH0pOwogICAgICB9IC8v5YWz6ZetIOijgeWJquaooeaAgeahhgoKCiAgICAgIHRoaXMubW9kZWxTaG93ID0gZmFsc2U7CiAgICB9LAogICAgLy8g5peL6L2s6KOB5Ymq5Zu+54mHCiAgICByb3RhdGVJbWFnZTogZnVuY3Rpb24gcm90YXRlSW1hZ2UoKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5yb3RhdGVSaWdodCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/suhang/Template/tradingview/demo2/src/components/sUpload/cropperView.js"],"names":["data","mounted","methods","imageToBase64","file","vm","reader","FileReader","readAsDataURL","onload","$set","option","result","$nextTick","modelShow","onerror","error","console","log","getCropFile","fileType","formData","FormData","$refs","cropper","getCropBlob","append","imageFileName","$emit","getCropData","rotateImage","rotateRight"],"mappings":"AAAA,eAAe;AACbA,EAAAA,IADa,kBACN;AACL,WAAO,EAAP;AAGD,GALY;AAObC,EAAAA,OAPa,qBAOH,CAET,CATY;AAUbC,EAAAA,OAAO,EAAE;AACP;;;;AAIAC,IAAAA,aALO,yBAKOC,IALP,EAKa;AAClB,UAAMC,EAAE,GAAG,IAAX;AACA,UAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,MAAAA,MAAM,CAACE,aAAP,CAAqBJ,IAArB;;AACAE,MAAAA,MAAM,CAACG,MAAP,GAAgB,YAAM;AACpB;AACAJ,QAAAA,EAAE,CAACK,IAAH,CAAQL,EAAE,CAACM,MAAX,EAAmB,KAAnB,EAA0BL,MAAM,CAACM,MAAjC;AACAP,QAAAA,EAAE,CAACQ,SAAH,CAAa,YAAM;AACjBR,UAAAA,EAAE,CAACS,SAAH,GAAe,IAAf;AACD,SAFD;AAGD,OAND;;AAOAR,MAAAA,MAAM,CAACS,OAAP,GAAiB,UAAUC,KAAV,EAAiB;AAChCC,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,KAAvB;AACD,OAFD;;AAGA,aAAO,KAAP;AACD,KApBM;AAqBP;AACAG,IAAAA,WAtBO,yBAsBO;AAAA;;AACZ;AACA,UAAI,KAAKC,QAAL,IAAiB,MAArB,EAA6B;AAC3B,YAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACA,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,WAAnB,CAA+B,UAACzB,IAAD,EAAU;AACvCqB,UAAAA,QAAQ,CAACK,MAAT,CAAgB,QAAhB,EAA0B1B,IAA1B,EAAgC,KAAI,CAAC2B,aAArC,EADuC,CAEvC;AACA;;AACA,UAAA,KAAI,CAACC,KAAL,CAAW,SAAX,EAAsBP,QAAtB;AACD,SALD;AAMD,OAVW,CAYZ;;;AACA,UAAI,KAAKD,QAAL,IAAiB,QAArB,EAA+B;AAC7B,aAAKG,KAAL,CAAWC,OAAX,CAAmBK,WAAnB,CAA+B,UAAC7B,IAAD,EAAU;AACvC,UAAA,KAAI,CAAC4B,KAAL,CAAW,SAAX,EAAsB5B,IAAtB;AACD,SAFD;AAGD,OAjBW,CAkBZ;;;AACA,WAAKc,SAAL,GAAiB,KAAjB;AACD,KA1CM;AA2CP;AACAgB,IAAAA,WA5CO,yBA4CO;AACZ,WAAKP,KAAL,CAAWC,OAAX,CAAmBO,WAAnB;AACD;AA9CM;AAVI,CAAf","sourcesContent":["export default {\n  data() {\n    return {\n\n    }\n  },\n\n  mounted() {\n\n  },\n  methods: {\n    /**\n     * 将本地图片转化为Base64，否则vue-cropper组件显示不出要本地需要剪裁的图片\n     * @param {*} file  二进制文件\n     */\n    imageToBase64(file) {\n      const vm = this;\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        // 截图框中的图片\n        vm.$set(vm.option, \"img\", reader.result);\n        vm.$nextTick(() => {\n          vm.modelShow = true;\n        });\n      };\n      reader.onerror = function (error) {\n        console.log(\"Error: \", error);\n      };\n      return false;\n    },\n    //裁剪\n    getCropFile() {\n      // 获取截图的blob数据\n      if (this.fileType == 'Blob') {\n        let formData = new FormData();\n        this.$refs.cropper.getCropBlob((data) => {\n          formData.append('avatar', data, this.imageFileName);\n          // formData私有类对象，访问不到，可以通过get判断值是否传进去\n          // console.log(formData.get('avatar'));\n          this.$emit('getFile', formData)\n        })\n      }\n\n      // 获取截图的base64 数据\n      if (this.fileType == 'Base64') {\n        this.$refs.cropper.getCropData((data) => {\n          this.$emit('getFile', data)\n        })\n      }\n      //关闭 裁剪模态框\n      this.modelShow = false;\n    },\n    // 旋转裁剪图片\n    rotateImage() {\n      this.$refs.cropper.rotateRight();\n    }\n  }\n}"]}]}