{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js!/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suhang/Template/tradingview/demo2/src/components/sUpload/sUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/sUpload/sUpload.vue","mtime":1596975991948},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js","mtime":1598844172845},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js","mtime":1598844194174}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGNyb3BwZXJWaWV3IGZyb20gIi4vY3JvcHBlclZpZXcudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIGNyb3BwZXJWaWV3OiBjcm9wcGVyVmlldwogIH0sCiAgcHJvcHM6IHsKICAgIC8v5LiK5Lyg5aS05YOP6YWN572uCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNfcHJldmlldzogZmFsc2UsCiAgICAgIC8v6buY6K6k5YC8IOeUqOS6juaBouWkjeWbnuaYvgogICAgICBmaWxlRGVmYXVsdDogW10sCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgZmlsZURhdGE6IHt9LAogICAgICAvL+aWh+S7tuWQjeWtlwogICAgICBpbWFnZUZpbGVOYW1lOiAiIiwKICAgICAgLy/oo4HliaoKICAgICAgc2hvd0Nyb3BwZXI6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/mlofku7bor7vlj5blrozmiJDlkI7nmoTlm57osIPlh73mlbAKICAgIGFmdGVyUmVhZDogZnVuY3Rpb24gYWZ0ZXJSZWFkKGZpbGUpIHsKICAgICAgLy/lhYjmuIXnqbog5Y+M5ZCR5pWw5o2u57uR5a6aIOmYsuatouacquijgeWJqiDlsLHmmL7npLrlm77niYcKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdOwogICAgICB0aGlzLmZpbGVEZWZhdWx0ID0gZmlsZTsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyVmlldy5zdGFydENyb3BwZXIoZmlsZSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOmihOiniOWbvueJhw0KICAgICAqIGJvbyDluIPlsJQgdHJ1ZSDmmL7npLrpooTop4ggIGZhbHNlIOWFs+mXremihOiniA0KICAgICAqLwogICAgcHJldmlld191cGxvYWRlcjogZnVuY3Rpb24gcHJldmlld191cGxvYWRlcihib28pIHsKICAgICAgdGhpcy5pc19wcmV2aWV3ID0gYm9vOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDmm7TmjaLlpLTlg48NCiAgICAgKi8KICAgIGNob29zZUZpbGU6IGZ1bmN0aW9uIGNob29zZUZpbGUoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZtLmZpbGVMaXN0ID0gW107CiAgICAgIHZtLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdm0uJHJlZnMudXBsb2FkZXJJbWcuY2xvc2VJbWFnZVByZXZpZXcoKTsKICAgICAgICB2bS4kcmVmcy51cGxvYWRlckltZy5jaG9vc2VGaWxlKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDoo4Hliarov4flkI7nmoTov5Tlm57lm77niYfmlofku7YNCiAgICAgKi8KICAgIGdldEZpbGU6IGZ1bmN0aW9uIGdldEZpbGUoZmlsZSkgewogICAgICAvLyBjb25zb2xlLmxvZygn6L+U5Zue55qE5paH5Lu2JytmaWxlKTsKICAgICAgdGhpcy4kZW1pdCgnZmlsZURhdGEnLCBmaWxlKTsKICAgICAgdGhpcy5maWxlTGlzdCA9IFt0aGlzLmZpbGVEZWZhdWx0XTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["sUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAA,WAAA,MAAA,mBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA;AAFA,GAJA;AAaA,EAAA,IAbA,kBAaA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA;AACA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA;AACA,MAAA,aAAA,EAAA,EAPA;AAQA;AACA,MAAA,WAAA,EAAA;AATA,KAAA;AAWA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,SAFA,qBAEA,IAFA,EAEA;AACA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,WAAA,CAAA,YAAA,CAAA,IAAA;AACA,KAPA;;AAQA;;;;AAIA,IAAA,gBAZA,4BAYA,GAZA,EAYA;AACA,WAAA,UAAA,GAAA,GAAA;AACA,KAdA;;AAeA;;;AAGA,IAAA,UAlBA,wBAkBA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,MAAA,EAAA,CAAA,QAAA,GAAA,EAAA;AACA,MAAA,EAAA,CAAA,SAAA,CAAA,YAAA;AACA,QAAA,EAAA,CAAA,KAAA,CAAA,WAAA,CAAA,iBAAA;AACA,QAAA,EAAA,CAAA,KAAA,CAAA,WAAA,CAAA,UAAA;AACA,OAHA;AAIA,KAzBA;;AA0BA;;;AAGA,IAAA,OA7BA,mBA6BA,IA7BA,EA6BA;AACA;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,IAAA;AACA,WAAA,QAAA,GAAA,CAAA,KAAA,WAAA,CAAA;AACA;AAjCA;AA1BA,CAAA","sourcesContent":["<template>\r\n  <div class=\"uploadWrap\" :style=\"`width:${options.width}px;height:${options.height}px;`\">\r\n    <!-- 上传组件 -->\r\n    <van-uploader\r\n      ref=\"uploaderImg\"\r\n      v-model=\"fileList\"\r\n      :after-read=\"afterRead\"\r\n      :max-count=\"1\"\r\n      upload-icon=\"photo-o\"\r\n      :accept=\"'image/*'\"\r\n      :deletable=\"false\"\r\n      @click-preview=\"preview_uploader(true)\"\r\n      @close-preview=\"preview_uploader(false)\"\r\n      :preview-options=\"options.previewOptions\"\r\n    />\r\n    <!-- 重新更换头像 -->\r\n    <van-button v-if=\"is_preview\" class=\"uploadBtn\" type=\"default\" @click=\"chooseFile\">更换头像</van-button>\r\n\r\n    <!-- 裁剪组件 -->\r\n    <cropper-view ref=\"cropperView\" :fileType=\"options.fileType\" @getFile=\"getFile\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport cropperView from \"./cropperView.vue\";\r\nexport default {\r\n  components: {\r\n    cropperView,\r\n  },\r\n  props: {\r\n    //上传头像配置\r\n    options: {\r\n      type: Object,\r\n      default: function () {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      is_preview: false,\r\n      //默认值 用于恢复回显\r\n      fileDefault: [],\r\n      fileList: [],\r\n      fileData: {},\r\n      //文件名字\r\n      imageFileName: \"\",\r\n      //裁剪\r\n      showCropper: false,\r\n    };\r\n  },\r\n  methods: {\r\n    //文件读取完成后的回调函数\r\n    afterRead(file) {\r\n      //先清空 双向数据绑定 防止未裁剪 就显示图片\r\n      this.fileList = [];\r\n      this.fileDefault = file;\r\n      this.$refs.cropperView.startCropper(file);\r\n    },\r\n    /**\r\n     * 预览图片\r\n     * boo 布尔 true 显示预览  false 关闭预览\r\n     */\r\n    preview_uploader(boo) {\r\n      this.is_preview = boo;\r\n    },\r\n    /**\r\n     * 更换头像\r\n     */\r\n    chooseFile() {\r\n      const vm = this;\r\n      vm.fileList = [];\r\n      vm.$nextTick(() => {\r\n        vm.$refs.uploaderImg.closeImagePreview();\r\n        vm.$refs.uploaderImg.chooseFile();\r\n      });\r\n    },\r\n    /**\r\n     * 裁剪过后的返回图片文件\r\n     */\r\n    getFile(file) {\r\n      // console.log('返回的文件'+file);\r\n       this.$emit('fileData', file)\r\n      this.fileList = [this.fileDefault];\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"./style.scss\";\r\n</style>\r\n"],"sourceRoot":"src/components/sUpload"}]}