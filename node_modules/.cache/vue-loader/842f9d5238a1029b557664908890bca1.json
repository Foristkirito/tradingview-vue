{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suhang/Template/tradingview/demo2/src/components/bank/bank.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/bank/bank.vue","mtime":1597047833496},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js","mtime":1598844172845},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js","mtime":1598844194174}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBnZXRCYW5rIGZyb20gJy4vYmFuayc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYmFuayIsCiAgcHJvcHM6IHsKICAgIC8vIGxhYmxl5paH5a2XCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgLy8g5o+Q56S65paH5a2XCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgICBsaXN0OltdLAogICAgICAgIHNob3c6ZmFsc2UsCiAgICAgICAgY2FyZE51bWJlcjoiIiwKICAgICAgICBiYW5rTmFtZToiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgICAgLy/lpLHljrvnhKbngrnor7fmsYIKICAgICAgYmx1cnMoKXsKICAgICAgICAgIGNvbnN0IHZtID0gdGhpczsKICAgICAgICAgIC8v5qOA5rWLIOmTtuihjOWNoeWPt+aYr+WQpuWtmOWcqAogICAgICAgICAgY29uc3QgaHR0cCA9ICJodHRwczovL2NjZGNhcGkuYWxpcGF5LmNvbS92YWxpZGF0ZUFuZENhY2hlQ2FyZEluZm8uanNvbj9faW5wdXRfY2hhcnNldD11dGYtOCZjYXJkQmluQ2hlY2s9dHJ1ZSI7CiAgICAgICAgICBheGlvcy5nZXQoaHR0cCwgewogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBjYXJkTm86IHZtLmNhcmROdW1iZXIKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT0gMjAwKXsKICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEudmFsaWRhdGVkKSB7CiAgICAgICAgICAgICAgICAgIHZtLnNob3cgPSB0cnVlOwogICAgICAgICAgICAgICAgICB2bS5iYW5rTmFtZSA9IHZtLmdldEJhbmsocmVzcG9uc2UuZGF0YS5iYW5rKTsKICAgICAgICAgICAgICAgICAgdm0uJGVtaXQoImNhbGxiYWNrIiwgewogICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXI6dm0uY2FyZE51bWJlciwKICAgICAgICAgICAgICAgICAgICBiYW5rTmFtZTp2bS5iYW5rTmFtZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgdm0uc2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB2bS4kbm90aWZ5KHsgdHlwZTogJ2RhbmdlcicsIG1lc3NhZ2U6ICfpk7booYzljaHlj7fovpPlhaXkuI3lkIjms5UnIH0pOwogICAgICAgICAgICAgICAgICB2bS5jYXJkTnVtYmVyPSIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgdm0uJG5vdGlmeSh7IHR5cGU6ICdkYW5nZXInLCBtZXNzYWdlOiAn5ZWK5YG277yB5pat572R5LqGLi4uJyB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkCiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgLy/orqHnrpcg5pyA57uI5pCc57Si55qE6ZO26KGM5ZCN5a2XCiAgICAgIGdldEJhbmsoc3RyKXsKICAgICAgICBjb25zdCB2bSA9IHRoaXM7CiAgICAgICAgbGV0IG5hbWUgPSAiIjsKICAgICAgICB2bS5saXN0Lm1hcChmdW5jdGlvbihjdXJyZW50VmFsdWUsaW5kZXgsYXJyKXsKICAgICAgICAgIGlmKGN1cnJlbnRWYWx1ZS52YWx1ZSA9PSBzdHIpewogICAgICAgICAgICBuYW1lID0gY3VycmVudFZhbHVlLnRleHQ7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICByZXR1cm4gbmFtZQogICAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3Qgdm0gPSB0aGlzOwogICAgdm0ubGlzdCA9IGdldEJhbmsuZ2V0QmFuaygpOwogIH0sCiAgY29tcHV0ZWQ6ewogICAgCiAgfQp9Owo="},{"version":3,"sources":["bank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"bank.vue","sourceRoot":"src/components/bank","sourcesContent":["<template>\n  <div class=\"vue-bank\">\n       <label>\n            <span>{{title}}</span>\n            <input type=\"tel\"\n            v-model.trim=\"cardNumber\"\n            @blur=\"blurs\"\n            :placeholder=\"placeholder\"\n            autocomplete=\"off\"\n            />\n        </label>\n        <label v-if=\"show\">\n            <span>所属银行</span>\n            <input type=\"text\"\n            v-model.trim=\"bankName\"\n            readonly  \n            unselectable=\"on\"\n            autocomplete=\"off\"\n            />\n        </label>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport getBank from './bank';\nexport default {\n  name: \"bank\",\n  props: {\n    // lable文字\n    title: {\n      type: String,\n      default: \"\"\n    },\n    // 提示文字\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n        list:[],\n        show:false,\n        cardNumber:\"\",\n        bankName:\"\"\n    };\n  },\n  methods: {\n      //失去焦点请求\n      blurs(){\n          const vm = this;\n          //检测 银行卡号是否存在\n          const http = \"https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?_input_charset=utf-8&cardBinCheck=true\";\n          axios.get(http, {\n            params: {\n              cardNo: vm.cardNumber\n            }\n          })\n          .then(function (response) {\n            if(response.status == 200){\n                if(response.data.validated) {\n                  vm.show = true;\n                  vm.bankName = vm.getBank(response.data.bank);\n                  vm.$emit(\"callback\", {\n                    cardNumber:vm.cardNumber,\n                    bankName:vm.bankName\n                  });\n                }else {\n                  vm.show = false;\n                  vm.$notify({ type: 'danger', message: '银行卡号输入不合法' });\n                  vm.cardNumber=\"\";\n                }\n            }else {\n              vm.$notify({ type: 'danger', message: '啊偶！断网了...' });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          })\n          .then(function () {\n            // always executed\n          });\n      },\n      //计算 最终搜索的银行名字\n      getBank(str){\n        const vm = this;\n        let name = \"\";\n        vm.list.map(function(currentValue,index,arr){\n          if(currentValue.value == str){\n            name = currentValue.text;\n          }\n        })\n        return name\n      }\n  },\n  mounted() {\n    const vm = this;\n    vm.list = getBank.getBank();\n  },\n  computed:{\n    \n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n    .vue-bank {\n        label {\n            height: 90px;\n            display: flex;\n            align-items: center;\n            border-bottom: 1px solid #eee;\n            span {\n                font-size: 30px;\n                color: #333;\n                width: 150px;\n            }\n            input {\n                height: 100%;\n                width: calc(100% - 150px);\n                border:0;\n                background-color: transparent;\n            }\n        }\n    }\n</style>"]}]}