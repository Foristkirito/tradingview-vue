{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suhang/Template/tradingview/demo2/src/components/sUpload/sUpload.vue?vue&type=style&index=0&id=32e5e739&lang=scss&scoped=true&","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/sUpload/sUpload.vue","mtime":1596975991948},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/css-loader/dist/cjs.js","mtime":1598844192908},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1598844194174},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/postcss-loader/src/index.js","mtime":1598844193730},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/sass-loader/dist/cjs.js","mtime":1599133639901},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js","mtime":1598844194174}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICIuL3N0eWxlLnNjc3MiOw0K"},{"version":3,"sources":["sUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA","file":"sUpload.vue","sourceRoot":"src/components/sUpload","sourcesContent":["<template>\r\n  <div class=\"uploadWrap\" :style=\"`width:${options.width}px;height:${options.height}px;`\">\r\n    <!-- 上传组件 -->\r\n    <van-uploader\r\n      ref=\"uploaderImg\"\r\n      v-model=\"fileList\"\r\n      :after-read=\"afterRead\"\r\n      :max-count=\"1\"\r\n      upload-icon=\"photo-o\"\r\n      :accept=\"'image/*'\"\r\n      :deletable=\"false\"\r\n      @click-preview=\"preview_uploader(true)\"\r\n      @close-preview=\"preview_uploader(false)\"\r\n      :preview-options=\"options.previewOptions\"\r\n    />\r\n    <!-- 重新更换头像 -->\r\n    <van-button v-if=\"is_preview\" class=\"uploadBtn\" type=\"default\" @click=\"chooseFile\">更换头像</van-button>\r\n\r\n    <!-- 裁剪组件 -->\r\n    <cropper-view ref=\"cropperView\" :fileType=\"options.fileType\" @getFile=\"getFile\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport cropperView from \"./cropperView.vue\";\r\nexport default {\r\n  components: {\r\n    cropperView,\r\n  },\r\n  props: {\r\n    //上传头像配置\r\n    options: {\r\n      type: Object,\r\n      default: function () {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      is_preview: false,\r\n      //默认值 用于恢复回显\r\n      fileDefault: [],\r\n      fileList: [],\r\n      fileData: {},\r\n      //文件名字\r\n      imageFileName: \"\",\r\n      //裁剪\r\n      showCropper: false,\r\n    };\r\n  },\r\n  methods: {\r\n    //文件读取完成后的回调函数\r\n    afterRead(file) {\r\n      //先清空 双向数据绑定 防止未裁剪 就显示图片\r\n      this.fileList = [];\r\n      this.fileDefault = file;\r\n      this.$refs.cropperView.startCropper(file);\r\n    },\r\n    /**\r\n     * 预览图片\r\n     * boo 布尔 true 显示预览  false 关闭预览\r\n     */\r\n    preview_uploader(boo) {\r\n      this.is_preview = boo;\r\n    },\r\n    /**\r\n     * 更换头像\r\n     */\r\n    chooseFile() {\r\n      const vm = this;\r\n      vm.fileList = [];\r\n      vm.$nextTick(() => {\r\n        vm.$refs.uploaderImg.closeImagePreview();\r\n        vm.$refs.uploaderImg.chooseFile();\r\n      });\r\n    },\r\n    /**\r\n     * 裁剪过后的返回图片文件\r\n     */\r\n    getFile(file) {\r\n      // console.log('返回的文件'+file);\r\n       this.$emit('fileData', file)\r\n      this.fileList = [this.fileDefault];\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"./style.scss\";\r\n</style>\r\n"]}]}