{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suhang/Template/tradingview/demo2/src/components/bank/bank.vue?vue&type=style&index=0&id=88682262&lang=scss&scoped=true&","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/bank/bank.vue","mtime":1597047833496},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/css-loader/dist/cjs.js","mtime":1598844192908},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1598844194174},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/postcss-loader/src/index.js","mtime":1598844193730},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/sass-loader/dist/cjs.js","mtime":1599133639901},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js","mtime":1598844194174}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnZ1ZS1iYW5rIHsKICAgIGxhYmVsIHsKICAgICAgICBoZWlnaHQ6IDkwcHg7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOwogICAgICAgIHNwYW4gewogICAgICAgICAgICBmb250LXNpemU6IDMwcHg7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICB3aWR0aDogMTUwcHg7CiAgICAgICAgfQogICAgICAgIGlucHV0IHsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMTUwcHgpOwogICAgICAgICAgICBib3JkZXI6MDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["bank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bank.vue","sourceRoot":"src/components/bank","sourcesContent":["<template>\n  <div class=\"vue-bank\">\n       <label>\n            <span>{{title}}</span>\n            <input type=\"tel\"\n            v-model.trim=\"cardNumber\"\n            @blur=\"blurs\"\n            :placeholder=\"placeholder\"\n            autocomplete=\"off\"\n            />\n        </label>\n        <label v-if=\"show\">\n            <span>所属银行</span>\n            <input type=\"text\"\n            v-model.trim=\"bankName\"\n            readonly  \n            unselectable=\"on\"\n            autocomplete=\"off\"\n            />\n        </label>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport getBank from './bank';\nexport default {\n  name: \"bank\",\n  props: {\n    // lable文字\n    title: {\n      type: String,\n      default: \"\"\n    },\n    // 提示文字\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n        list:[],\n        show:false,\n        cardNumber:\"\",\n        bankName:\"\"\n    };\n  },\n  methods: {\n      //失去焦点请求\n      blurs(){\n          const vm = this;\n          //检测 银行卡号是否存在\n          const http = \"https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?_input_charset=utf-8&cardBinCheck=true\";\n          axios.get(http, {\n            params: {\n              cardNo: vm.cardNumber\n            }\n          })\n          .then(function (response) {\n            if(response.status == 200){\n                if(response.data.validated) {\n                  vm.show = true;\n                  vm.bankName = vm.getBank(response.data.bank);\n                  vm.$emit(\"callback\", {\n                    cardNumber:vm.cardNumber,\n                    bankName:vm.bankName\n                  });\n                }else {\n                  vm.show = false;\n                  vm.$notify({ type: 'danger', message: '银行卡号输入不合法' });\n                  vm.cardNumber=\"\";\n                }\n            }else {\n              vm.$notify({ type: 'danger', message: '啊偶！断网了...' });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          })\n          .then(function () {\n            // always executed\n          });\n      },\n      //计算 最终搜索的银行名字\n      getBank(str){\n        const vm = this;\n        let name = \"\";\n        vm.list.map(function(currentValue,index,arr){\n          if(currentValue.value == str){\n            name = currentValue.text;\n          }\n        })\n        return name\n      }\n  },\n  mounted() {\n    const vm = this;\n    vm.list = getBank.getBank();\n  },\n  computed:{\n    \n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n    .vue-bank {\n        label {\n            height: 90px;\n            display: flex;\n            align-items: center;\n            border-bottom: 1px solid #eee;\n            span {\n                font-size: 30px;\n                color: #333;\n                width: 150px;\n            }\n            input {\n                height: 100%;\n                width: calc(100% - 150px);\n                border:0;\n                background-color: transparent;\n            }\n        }\n    }\n</style>"]}]}