{"remainingRequest":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suhang/Template/tradingview/demo2/src/components/sUpload/sUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suhang/Template/tradingview/demo2/src/components/sUpload/sUpload.vue","mtime":1596975991948},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/babel-loader/lib/index.js","mtime":1598844172845},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/cache-loader/dist/cjs.js","mtime":1598844172828},{"path":"/Users/suhang/Template/tradingview/demo2/node_modules/vue-loader/lib/index.js","mtime":1598844194174}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY3JvcHBlclZpZXcgZnJvbSAiLi9jcm9wcGVyVmlldy52dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgY3JvcHBlclZpZXcsDQogIH0sDQogIHByb3BzOiB7DQogICAgLy/kuIrkvKDlpLTlg4/phY3nva4NCiAgICBvcHRpb25zOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiB7fTsNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNfcHJldmlldzogZmFsc2UsDQogICAgICAvL+m7mOiupOWAvCDnlKjkuo7mgaLlpI3lm57mmL4NCiAgICAgIGZpbGVEZWZhdWx0OiBbXSwNCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGZpbGVEYXRhOiB7fSwNCiAgICAgIC8v5paH5Lu25ZCN5a2XDQogICAgICBpbWFnZUZpbGVOYW1lOiAiIiwNCiAgICAgIC8v6KOB5YmqDQogICAgICBzaG93Q3JvcHBlcjogZmFsc2UsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v5paH5Lu26K+75Y+W5a6M5oiQ5ZCO55qE5Zue6LCD5Ye95pWwDQogICAgYWZ0ZXJSZWFkKGZpbGUpIHsNCiAgICAgIC8v5YWI5riF56m6IOWPjOWQkeaVsOaNrue7keWumiDpmLLmraLmnKroo4Hliaog5bCx5pi+56S65Zu+54mHDQogICAgICB0aGlzLmZpbGVMaXN0ID0gW107DQogICAgICB0aGlzLmZpbGVEZWZhdWx0ID0gZmlsZTsNCiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlclZpZXcuc3RhcnRDcm9wcGVyKGZpbGUpOw0KICAgIH0sDQogICAgLyoqDQogICAgICog6aKE6KeI5Zu+54mHDQogICAgICogYm9vIOW4g+WwlCB0cnVlIOaYvuekuumihOiniCAgZmFsc2Ug5YWz6Zet6aKE6KeIDQogICAgICovDQogICAgcHJldmlld191cGxvYWRlcihib28pIHsNCiAgICAgIHRoaXMuaXNfcHJldmlldyA9IGJvbzsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOabtOaNouWktOWDjw0KICAgICAqLw0KICAgIGNob29zZUZpbGUoKSB7DQogICAgICBjb25zdCB2bSA9IHRoaXM7DQogICAgICB2bS5maWxlTGlzdCA9IFtdOw0KICAgICAgdm0uJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdm0uJHJlZnMudXBsb2FkZXJJbWcuY2xvc2VJbWFnZVByZXZpZXcoKTsNCiAgICAgICAgdm0uJHJlZnMudXBsb2FkZXJJbWcuY2hvb3NlRmlsZSgpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDoo4Hliarov4flkI7nmoTov5Tlm57lm77niYfmlofku7YNCiAgICAgKi8NCiAgICBnZXRGaWxlKGZpbGUpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCfov5Tlm57nmoTmlofku7YnK2ZpbGUpOw0KICAgICAgIHRoaXMuJGVtaXQoJ2ZpbGVEYXRhJywgZmlsZSkNCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbdGhpcy5maWxlRGVmYXVsdF07DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["sUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sUpload.vue","sourceRoot":"src/components/sUpload","sourcesContent":["<template>\r\n  <div class=\"uploadWrap\" :style=\"`width:${options.width}px;height:${options.height}px;`\">\r\n    <!-- 上传组件 -->\r\n    <van-uploader\r\n      ref=\"uploaderImg\"\r\n      v-model=\"fileList\"\r\n      :after-read=\"afterRead\"\r\n      :max-count=\"1\"\r\n      upload-icon=\"photo-o\"\r\n      :accept=\"'image/*'\"\r\n      :deletable=\"false\"\r\n      @click-preview=\"preview_uploader(true)\"\r\n      @close-preview=\"preview_uploader(false)\"\r\n      :preview-options=\"options.previewOptions\"\r\n    />\r\n    <!-- 重新更换头像 -->\r\n    <van-button v-if=\"is_preview\" class=\"uploadBtn\" type=\"default\" @click=\"chooseFile\">更换头像</van-button>\r\n\r\n    <!-- 裁剪组件 -->\r\n    <cropper-view ref=\"cropperView\" :fileType=\"options.fileType\" @getFile=\"getFile\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport cropperView from \"./cropperView.vue\";\r\nexport default {\r\n  components: {\r\n    cropperView,\r\n  },\r\n  props: {\r\n    //上传头像配置\r\n    options: {\r\n      type: Object,\r\n      default: function () {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      is_preview: false,\r\n      //默认值 用于恢复回显\r\n      fileDefault: [],\r\n      fileList: [],\r\n      fileData: {},\r\n      //文件名字\r\n      imageFileName: \"\",\r\n      //裁剪\r\n      showCropper: false,\r\n    };\r\n  },\r\n  methods: {\r\n    //文件读取完成后的回调函数\r\n    afterRead(file) {\r\n      //先清空 双向数据绑定 防止未裁剪 就显示图片\r\n      this.fileList = [];\r\n      this.fileDefault = file;\r\n      this.$refs.cropperView.startCropper(file);\r\n    },\r\n    /**\r\n     * 预览图片\r\n     * boo 布尔 true 显示预览  false 关闭预览\r\n     */\r\n    preview_uploader(boo) {\r\n      this.is_preview = boo;\r\n    },\r\n    /**\r\n     * 更换头像\r\n     */\r\n    chooseFile() {\r\n      const vm = this;\r\n      vm.fileList = [];\r\n      vm.$nextTick(() => {\r\n        vm.$refs.uploaderImg.closeImagePreview();\r\n        vm.$refs.uploaderImg.chooseFile();\r\n      });\r\n    },\r\n    /**\r\n     * 裁剪过后的返回图片文件\r\n     */\r\n    getFile(file) {\r\n      // console.log('返回的文件'+file);\r\n       this.$emit('fileData', file)\r\n      this.fileList = [this.fileDefault];\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"./style.scss\";\r\n</style>\r\n"]}]}